version: 1
frontend:
  phases:
    build:
      commands:
        - echo "No frontend build commands needed"
  artifacts:
    baseDirectory: .
    files:
      - '**/*'
  cache:
    paths: []
backend:
  phases:
    preBuild:
      commands:
        - curl -OL https://golang.org/dl/go1.22.0.linux-amd64.tar.gz
        - sudo rm -rf /usr/local/go
        - sudo tar -C /usr/local -xzf go1.22.0.linux-amd64.tar.gz
        - export PATH=$PATH:/usr/local/go/bin
        - export GOPATH=$HOME/go
        - export GOMODCACHE=$HOME/go/pkg/mod
        - mkdir -p $HOME/go/pkg/mod
        - go version
    build:
      commands:
        - go mod download
        - go build -o main
  artifacts:
    baseDirectory: .
    files:
      - '**/*'
  cache:
    paths:
      - go.sum
      - go.mod 